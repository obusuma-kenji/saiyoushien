<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¡ç”¨æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ  - å…±æ„Ÿã¨é©æ€§ã§"æ¬²ã—ã„äºº"ã‚’è¦‹æŠœã</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        .loading { display: flex; justify-content: center; align-items: center; min-height: 100vh; }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            <div style="text-align: center;">
                <h1 style="font-size: 2rem; margin-bottom: 1rem;">èª­ã¿è¾¼ã¿ä¸­...</h1>
                <p>Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [personas, setPersonas] = useState([]);
            const [coreValues, setCoreValues] = useState([]);
            const [candidates, setCandidates] = useState([]);
            const [sctQuestions] = useState([
              { id: 1, question: 'ç· åˆ‡ç›´å‰ã§ãƒŸã‚¹ã«æ°—ã¥ã„ãŸã¨ãã€ç§ã¯________ã€‚', aim: 'è²¬ä»»æ„Ÿãƒ»å ±é€£ç›¸', coreValue: 'èª å®Ÿ', persona: 'ä½¿å‘½ä½“ç¾' },
              { id: 2, question: 'åŒã˜ä½œæ¥­ãŒç¶šãã¨ãã€ç§ã¯________ã€‚', aim: 'æŒç¶šåŠ›ãƒ»æ­£ç¢ºæ€§', coreValue: 'ä¿¡é ¼', persona: 'ä¸å¯§ã§æ­£ç¢º' },
              { id: 3, question: 'æ–°ã—ã„ä»•äº‹ã‚’ä»»ã•ã‚ŒãŸã¨ãã€ã¾ãš________ã€‚', aim: 'ä¸»ä½“æ€§ãƒ»è¨ˆç”»æ€§', coreValue: 'æˆé•·å¿—å‘', persona: 'å­¦ç¿’æ„æ¬²' },
              { id: 4, question: 'ãƒãƒ¼ãƒ ã§æ„è¦‹ãŒåˆ†ã‹ã‚ŒãŸã¨ãã€ç§ã¯________ã€‚', aim: 'å”èª¿æ€§ãƒ»å¯¾è©±åŠ›', coreValue: 'ãƒãƒ¼ãƒ è²¢çŒ®', persona: 'å”åƒå§¿å‹¢' },
              { id: 5, question: 'å„ªå…ˆé †ä½ãŒæ›–æ˜§ãªã¨ãã€ç§ã¯________ã€‚', aim: 'åˆ¤æ–­åŠ›ãƒ»ç¢ºèªè¡Œå‹•', coreValue: 'èª å®Ÿ', persona: 'å ±é€£ç›¸' },
              { id: 6, question: 'ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹ã¨ãã€ã¤ã„________ã€‚', aim: 'å­¦ç¿’å§¿å‹¢ãƒ»è‡ªå·±è§£æ±º', coreValue: 'æˆé•·å¿—å‘', persona: 'å‘ä¸Šå¿ƒ' },
              { id: 7, question: 'ãƒŸã‚¹ã‚’æŒ‡æ‘˜ã•ã‚ŒãŸã¨ãã€ç§ã¯________ã€‚', aim: 'å—å®¹æ€§ãƒ»æ”¹å–„æ„æ¬²', coreValue: 'èª å®Ÿ', persona: 'ç´ ç›´ã•' },
              { id: 8, question: 'å¿™ã—ã„æ™‚æœŸãŒç¶šãã¨ã€ç§ã¯________ã€‚', aim: 'ã‚¹ãƒˆãƒ¬ã‚¹è€æ€§ãƒ»æŒç¶šåŠ›', coreValue: 'æŒç¶šåŠ›', persona: 'ä»•äº‹é‡è€æ€§' },
              { id: 9, question: 'ä»•äº‹ã§å¤§åˆ‡ã«ã—ãŸã„ã®ã¯________ã€‚', aim: 'ä¾¡å€¤è¦³ã®æ ¸å¿ƒ', coreValue: 'å…¨èˆ¬', persona: 'ç·åˆåƒ' },
              { id: 10, question: 'è·å ´ã§ä¿¡é ¼ã•ã‚Œã‚‹äººã¨ã¯________ã€‚', aim: 'ãƒ­ãƒ¼ãƒ«ãƒ¢ãƒ‡ãƒ«åƒ', coreValue: 'ä¿¡é ¼', persona: 'äººç‰©åƒ' },
              { id: 11, question: 'æˆæœã‚’å‡ºã™ãŸã‚ã«å¿…è¦ãªã®ã¯________ã€‚', aim: 'æˆæœè¦³ãƒ»åŠªåŠ›è¦³', coreValue: 'æˆæœå¿—å‘', persona: 'ä½¿å‘½ä½“ç¾' },
              { id: 12, question: 'æ™‚é–“ã®ä½¿ã„æ–¹ã§å·¥å¤«ã—ã¦ã„ã‚‹ã®ã¯________ã€‚', aim: 'åŠ¹ç‡æ€§ãƒ»è¨ˆç”»æ€§', coreValue: 'æ™‚é–“ã‚’ä½œã‚‹', persona: 'æ¥­å‹™æ”¹å–„' },
              { id: 13, question: 'å‰ã®è·å ´ï¼ˆå­¦æ ¡ï¼‰ã§è©•ä¾¡ã•ã‚ŒãŸã®ã¯________ã€‚', aim: 'éå»å®Ÿç¸¾ãƒ»å¼·ã¿', coreValue: 'å…¨èˆ¬', persona: 'é©æ€§ç¢ºèª' },
              { id: 14, question: 'ã“ã®ä¼šç¤¾ã§å®Ÿç¾ã—ãŸã„ã®ã¯________ã€‚', aim: 'å¿—æœ›å‹•æ©Ÿãƒ»å…±æ„Ÿåº¦', coreValue: 'å…¨èˆ¬', persona: 'ãƒ“ã‚¸ãƒ§ãƒ³ä¸€è‡´' },
              { id: 15, question: '3å¹´å¾Œã®è‡ªåˆ†ã¯________ã€‚', aim: 'ã‚­ãƒ£ãƒªã‚¢è¦³ãƒ»å®šç€æ„æ¬²', coreValue: 'æˆé•·å¿—å‘', persona: 'ä¸­é•·æœŸè¦–ç‚¹' }
            ]);
            const [evaluationInProgress, setEvaluationInProgress] = useState(false);

            const tabs = [
                { id: 'dashboard', name: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', icon: 'ğŸ“Š' },
                { id: 'persona', name: 'ãƒšãƒ«ã‚½ãƒŠè¨­è¨ˆ', icon: 'ğŸ¯' },
                { id: 'corevalues', name: 'ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼', icon: 'âœ“' },
                { id: 'candidates', name: 'å€™è£œè€…ç®¡ç†', icon: 'ğŸ‘¥' },
                { id: 'interview', name: 'SCTé¢æ¥', icon: 'ğŸ“' },
                { id: 'evaluation', name: 'è©•ä¾¡åˆ¤å®š', icon: 'âš™ï¸' },
                { id: 'onboarding', name: 'ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°', icon: 'ğŸ“…' },
            ];

            function renderContent() {
                if (activeTab === 'dashboard') {
                    return <Dashboard candidates={candidates} personas={personas} coreValues={coreValues} />;
                } else if (activeTab === 'persona') {
                    return <PersonaDesign personas={personas} setPersonas={setPersonas} coreValues={coreValues} />;
                } else if (activeTab === 'corevalues') {
                    return <CoreValuesManagement coreValues={coreValues} setCoreValues={setCoreValues} />;
                } else if (activeTab === 'candidates') {
                    return <CandidateManagement candidates={candidates} setCandidates={setCandidates} />;
                } else if (activeTab === 'interview') {
                    return <SCTInterview candidates={candidates} setCandidates={setCandidates} sctQuestions={sctQuestions} />;
                } else if (activeTab === 'evaluation') {
                    return <EvaluationJudgment candidates={candidates} setCandidates={setCandidates} coreValues={coreValues} personas={personas} evaluationInProgress={evaluationInProgress} setEvaluationInProgress={setEvaluationInProgress} />;
                } else if (activeTab === 'onboarding') {
                    return <OnboardingPlan candidates={candidates} coreValues={coreValues} />;
                }
                return null;
            }

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-white shadow-sm border-b">
                        <div className="max-w-7xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h1 className="text-2xl font-bold text-gray-900">æ¡ç”¨æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ </h1>
                                    <p className="text-sm text-gray-600 mt-1">å…±æ„Ÿã¨é©æ€§ã§"æ¬²ã—ã„äºº"ã‚’è¦‹æŠœã</p>
                                </div>
                                <div className="text-sm text-gray-500">è„±ãƒ»å¦¥å”æ¡ç”¨ | ä¸‰ä½ä¸€ä½“ãƒ¢ãƒ‡ãƒ«</div>
                            </div>
                        </div>
                    </header>

                    <div className="bg-white border-b">
                        <div className="max-w-7xl mx-auto px-4">
                            <nav className="flex space-x-4 overflow-x-auto">
                                {tabs.map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center space-x-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${
                                            activeTab === tab.id ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-600 hover:text-gray-900'
                                        }`}
                                    >
                                        <span className="text-lg">{tab.icon}</span>
                                        <span className="font-medium">{tab.name}</span>
                                    </button>
                                ))}
                            </nav>
                        </div>
                    </div>

                    <main className="max-w-7xl mx-auto px-4 py-6">
                        {renderContent()}
                    </main>
                </div>
            );
        }

        function Dashboard({ candidates, personas, coreValues }) {
            const totalCandidates = candidates.length;
            const interviewedCandidates = candidates.filter(c => c.sctAnswers && c.sctAnswers.length > 0).length;
            const evaluatedCandidates = candidates.filter(c => c.evaluation).length;
            const acceptedCandidates = candidates.filter(c => c.evaluation?.decision === 'æ¡ç”¨').length;

            return (
                <div className="space-y-6">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div className="bg-white rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-600">ç·å€™è£œè€…æ•°</p>
                                    <p className="text-3xl font-bold mt-2">{totalCandidates}</p>
                                </div>
                                <div className="p-3 rounded-full bg-blue-100 text-blue-600">
                                    <span className="text-2xl">ğŸ‘¥</span>
                                </div>
                            </div>
                        </div>
                        <div className="bg-white rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-600">é¢æ¥å®Œäº†</p>
                                    <p className="text-3xl font-bold mt-2">{interviewedCandidates}</p>
                                </div>
                                <div className="p-3 rounded-full bg-green-100 text-green-600">
                                    <span className="text-2xl">ğŸ“</span>
                                </div>
                            </div>
                        </div>
                        <div className="bg-white rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-600">è©•ä¾¡å®Œäº†</p>
                                    <p className="text-3xl font-bold mt-2">{evaluatedCandidates}</p>
                                </div>
                                <div className="p-3 rounded-full bg-purple-100 text-purple-600">
                                    <span className="text-2xl">âœ“</span>
                                </div>
                            </div>
                        </div>
                        <div className="bg-white rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-600">æ¡ç”¨æ±ºå®š</p>
                                    <p className="text-3xl font-bold mt-2">{acceptedCandidates}</p>
                                </div>
                                <div className="p-3 rounded-full bg-orange-100 text-orange-600">
                                    <span className="text-2xl">ğŸ¯</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div className="bg-white rounded-lg shadow p-6">
                            <h3 className="text-lg font-semibold mb-4">ä¸‰ä½ä¸€ä½“ãƒ¢ãƒ‡ãƒ«</h3>
                            <div className="space-y-3">
                                <div className="flex items-start space-x-3">
                                    <div className="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                                    <div>
                                        <p className="font-medium text-gray-900">ä¾¡å€¤è¦³ï¼ˆã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼ï¼‰</p>
                                        <p className="text-sm text-gray-600">{coreValues.length}å€‹è¨­å®šæ¸ˆã¿ - è¡Œå‹•ã®ç¾…é‡ç›¤</p>
                                    </div>
                                </div>
                                <div className="flex items-start space-x-3">
                                    <div className="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                                    <div>
                                        <p className="font-medium text-gray-900">äººç‰©åƒï¼ˆãƒšãƒ«ã‚½ãƒŠï¼‰</p>
                                        <p className="text-sm text-gray-600">{personas.length}å€‹è¨­å®šæ¸ˆã¿ - æˆæœã‚’å‡ºã™è¨­è¨ˆå›³</p>
                                    </div>
                                </div>
                                <div className="flex items-start space-x-3">
                                    <div className="w-2 h-2 bg-purple-500 rounded-full mt-2"></div>
                                    <div>
                                        <p className="font-medium text-gray-900">è·å‹™é©åˆ</p>
                                        <p className="text-sm text-gray-600">SCT Ã— é©æ€§è¨ºæ–­ã§æ¤œè¨¼</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow p-6">
                            <h3 className="text-lg font-semibold mb-4">æœ€è¿‘ã®å€™è£œè€…</h3>
                            <div className="space-y-2">
                                {candidates.slice(-5).reverse().map((candidate, idx) => (
                                    <div key={idx} className="flex items-center justify-between py-2 border-b last:border-b-0">
                                        <div>
                                            <p className="font-medium text-gray-900">{candidate.name}</p>
                                            <p className="text-xs text-gray-500">{candidate.position || 'è·ç¨®æœªè¨­å®š'}</p>
                                        </div>
                                        <div className="text-sm">
                                            {candidate.evaluation?.decision ? (
                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                                                    candidate.evaluation.decision === 'æ¡ç”¨' ? 'bg-green-100 text-green-800' :
                                                    candidate.evaluation.decision === 'ä¿ç•™' ? 'bg-yellow-100 text-yellow-800' :
                                                    'bg-red-100 text-red-800'
                                                }`}>
                                                    {candidate.evaluation.decision}
                                                </span>
                                            ) : (
                                                <span className="text-gray-400">æœªè©•ä¾¡</span>
                                            )}
                                        </div>
                                    </div>
                                ))}
                                {candidates.length === 0 && (
                                    <p className="text-gray-500 text-sm text-center py-4">å€™è£œè€…ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function PersonaDesign({ personas, setPersonas, coreValues }) {
            const [isEditing, setIsEditing] = useState(false);
            const [currentPersona, setCurrentPersona] = useState({
                name: '', catchPhrase: '', mission: '', behaviorConsistency: '',
                workLifeBalance: '', antiPersona: '', relatedCoreValues: []
            });

            function handleSave() {
                if (currentPersona.name) {
                    setPersonas([...personas, { ...currentPersona, id: Date.now() }]);
                    setCurrentPersona({ name: '', catchPhrase: '', mission: '', behaviorConsistency: '', workLifeBalance: '', antiPersona: '', relatedCoreValues: [] });
                    setIsEditing(false);
                }
            }

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                        <div className="flex items-center justify-between mb-4">
                            <h2 className="text-xl font-bold">ãƒšãƒ«ã‚½ãƒŠè¨­è¨ˆ - ç†æƒ³ã¨ç¾å®Ÿã®æ©‹æ¸¡ã—</h2>
                            <button onClick={() => setIsEditing(!isEditing)} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                {isEditing ? 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' : '+ æ–°è¦ãƒšãƒ«ã‚½ãƒŠ'}
                            </button>
                        </div>

                        <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                            <p className="text-sm text-blue-800">
                                <strong>5ãƒ–ãƒ­ãƒƒã‚¯æ§‹æˆï¼š</strong> â‘ ä»•äº‹ã®æœ¬è³ªã¨å½¹å‰² â‘¡è¡Œå‹•ãƒ»ä¾¡å€¤è¦³ã®ä¸€è²«æ€§ â‘¢ä»•äº‹ã¨ç”Ÿæ´»ã®èª¿å’Œ â‘£ã‚¢ãƒ³ãƒãƒ»ãƒšãƒ«ã‚½ãƒŠ â‘¤ç·åˆåƒ
                            </p>
                        </div>

                        {isEditing && (
                            <div className="space-y-4 mb-6 p-6 bg-gray-50 rounded-lg">
                                <div>
                                    <label className="block text-sm font-medium mb-2">ãƒšãƒ«ã‚½ãƒŠå</label>
                                    <input type="text" value={currentPersona.name} onChange={(e) => setCurrentPersona({...currentPersona, name: e.target.value})} className="w-full px-3 py-2 border rounded-lg" placeholder="ä¾‹: æ¯æ—¥ãƒ’ãƒƒãƒˆã‚’ç©ã‚€äº‹å‹™è·" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">ç·åˆåƒï¼ˆ1æ–‡ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºï¼‰</label>
                                    <input type="text" value={currentPersona.catchPhrase} onChange={(e) => setCurrentPersona({...currentPersona, catchPhrase: e.target.value})} className="w-full px-3 py-2 border rounded-lg" placeholder="æ±‚äººå†’é ­ã«ç½®ã1æ–‡" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">â‘ ä»•äº‹ã®æœ¬è³ªã¨å½¹å‰²</label>
                                    <textarea value={currentPersona.mission} onChange={(e) => setCurrentPersona({...currentPersona, mission: e.target.value})} className="w-full px-3 py-2 border rounded-lg" rows="3" placeholder="ä½¿å‘½ä½“ç¾ / æˆæœã‚’æ¥½ã—ã‚ã‚‹ / æˆé•·å¿—å‘" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">â‘¡è¡Œå‹•ãƒ»ä¾¡å€¤è¦³ã®ä¸€è²«æ€§</label>
                                    <textarea value={currentPersona.behaviorConsistency} onChange={(e) => setCurrentPersona({...currentPersona, behaviorConsistency: e.target.value})} className="w-full px-3 py-2 border rounded-lg" rows="3" placeholder="ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼å…±æ„Ÿ / æ–‡åŒ–é©åˆ / ãƒãƒ¼ãƒ è²¢çŒ®" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">â‘¢ä»•äº‹ã¨ç”Ÿæ´»ã®èª¿å’Œ</label>
                                    <textarea value={currentPersona.workLifeBalance} onChange={(e) => setCurrentPersona({...currentPersona, workLifeBalance: e.target.value})} className="w-full px-3 py-2 border rounded-lg" rows="2" placeholder="å‹¤å‹™ãƒªã‚ºãƒ  / æŒç¶šåŠ› / ç’°å¢ƒä¸€è‡´" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">â‘£ã‚¢ãƒ³ãƒãƒ»ãƒšãƒ«ã‚½ãƒŠ</label>
                                    <textarea value={currentPersona.antiPersona} onChange={(e) => setCurrentPersona({...currentPersona, antiPersona: e.target.value})} className="w-full px-3 py-2 border rounded-lg" rows="2" placeholder="é¿ã‘ã‚‹ã¹ãç‰¹æ€§ã‚„è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³" />
                                </div>
                                <button onClick={handleSave} className="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">ä¿å­˜</button>
                            </div>
                        )}

                        <div className="space-y-4">
                            {personas.map((persona, idx) => (
                                <div key={idx} className="border rounded-lg p-4 bg-white hover:shadow-md transition-shadow">
                                    <div className="flex items-start justify-between mb-3">
                                        <div>
                                            <h3 className="font-bold text-lg">{persona.name}</h3>
                                            <p className="text-sm text-gray-600 italic mt-1">{persona.catchPhrase}</p>
                                        </div>
                                        <button onClick={() => setPersonas(personas.filter((_, i) => i !== idx))} className="text-red-600 hover:text-red-800 text-sm">å‰Šé™¤</button>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                        <div><p className="font-medium text-gray-700">ä»•äº‹ã®æœ¬è³ª:</p><p className="text-gray-600">{persona.mission}</p></div>
                                        <div><p className="font-medium text-gray-700">è¡Œå‹•ãƒ»ä¾¡å€¤è¦³:</p><p className="text-gray-600">{persona.behaviorConsistency}</p></div>
                                    </div>
                                </div>
                            ))}
                            {personas.length === 0 && (
                                <div className="text-center py-12 text-gray-500">
                                    <span className="text-4xl">ğŸ¯</span>
                                    <p className="mt-3">ãƒšãƒ«ã‚½ãƒŠãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function CoreValuesManagement({ coreValues, setCoreValues }) {
            const [isAdding, setIsAdding] = useState(false);
            const [newValue, setNewValue] = useState({ name: '', definition: '', behaviors: '' });

            function handleAdd() {
                if (newValue.name && newValue.definition && newValue.behaviors) {
                    setCoreValues([...coreValues, { ...newValue, id: Date.now() }]);
                    setNewValue({ name: '', definition: '', behaviors: '' });
                    setIsAdding(false);
                }
            }

            return (
                <div className="bg-white rounded-lg shadow p-6">
                    <div className="flex items-center justify-between mb-4">
                        <div>
                            <h2 className="text-xl font-bold">ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼ã®ç¿»è¨³</h2>
                            <p className="text-sm text-gray-600 mt-1">ç†å¿µã‚’ã€Œè¡Œå‹•ã®åŸºæº–ã€ã«è½ã¨ã™</p>
                        </div>
                        <button onClick={() => setIsAdding(!isAdding)} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            {isAdding ? 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' : '+ æ–°è¦ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼'}
                        </button>
                    </div>

                    {isAdding && (
                        <div className="space-y-4 mb-6 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label className="block text-sm font-medium mb-2">ä¾¡å€¤ã®åç§°</label>
                                <input type="text" value={newValue.name} onChange={(e) => setNewValue({...newValue, name: e.target.value})} className="w-full px-3 py-2 border rounded-lg" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium mb-2">å®šç¾©</label>
                                <input type="text" value={newValue.definition} onChange={(e) => setNewValue({...newValue, definition: e.target.value})} className="w-full px-3 py-2 border rounded-lg" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium mb-2">å…·ä½“çš„ãªè¡Œå‹•ï¼ˆ / ã§åŒºåˆ‡ã‚‹ï¼‰</label>
                                <textarea value={newValue.behaviors} onChange={(e) => setNewValue({...newValue, behaviors: e.target.value})} className="w-full px-3 py-2 border rounded-lg" rows="3" />
                            </div>
                            <button onClick={handleAdd} className="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">è¿½åŠ </button>
                        </div>
                    )}

                    <div className="space-y-3">
                        {coreValues.map((value, idx) => (
                            <div key={idx} className="border rounded-lg p-4">
                                <div className="flex justify-between">
                                    <div className="flex-1">
                                        <h3 className="font-bold text-lg">{value.name}</h3>
                                        <p className="text-sm mt-2">{value.definition}</p>
                                        <p className="text-sm mt-2 text-gray-600">{value.behaviors}</p>
                                    </div>
                                    <button onClick={() => setCoreValues(coreValues.filter((_, i) => i !== idx))} className="text-red-600 text-sm">å‰Šé™¤</button>
                                </div>
                            </div>
                        ))}
                        {coreValues.length === 0 && (
                            <div className="text-center py-12 text-gray-500">
                                <span className="text-4xl">âœ“</span>
                                <p className="mt-3">ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function CandidateManagement({ candidates, setCandidates }) {
            const [isAdding, setIsAdding] = useState(false);
            const [newCandidate, setNewCandidate] = useState({ name: '', email: '', position: '' });

            function handleAdd() {
                if (newCandidate.name && newCandidate.email) {
                    setCandidates([...candidates, { ...newCandidate, id: Date.now(), sctAnswers: [], evaluation: null }]);
                    setNewCandidate({ name: '', email: '', position: '' });
                    setIsAdding(false);
                }
            }

            return (
                <div className="bg-white rounded-lg shadow p-6">
                    <div className="flex items-center justify-between mb-4">
                        <h2 className="text-xl font-bold">å€™è£œè€…ç®¡ç†</h2>
                        <button onClick={() => setIsAdding(!isAdding)} className="px-4 py-2 bg-blue-600 text-white rounded-lg">
                            {isAdding ? 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' : '+ æ–°è¦å€™è£œè€…'}
                        </button>
                    </div>

                    {isAdding && (
                        <div className="space-y-4 mb-6 p-6 bg-gray-50 rounded-lg">
                            <input type="text" placeholder="æ°å" value={newCandidate.name} onChange={(e) => setNewCandidate({...newCandidate, name: e.target.value})} className="w-full px-3 py-2 border rounded-lg" />
                            <input type="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" value={newCandidate.email} onChange={(e) => setNewCandidate({...newCandidate, email: e.target.value})} className="w-full px-3 py-2 border rounded-lg" />
                            <input type="text" placeholder="å¿œå‹Ÿè·ç¨®" value={newCandidate.position} onChange={(e) => setNewCandidate({...newCandidate, position: e.target.value})} className="w-full px-3 py-2 border rounded-lg" />
                            <button onClick={handleAdd} className="w-full px-4 py-2 bg-green-600 text-white rounded-lg">ç™»éŒ²</button>
                        </div>
                    )}

                    <div className="space-y-2">
                        {candidates.map((c, idx) => (
                            <div key={idx} className="flex justify-between items-center p-3 border rounded">
                                <div>
                                    <p className="font-medium">{c.name}</p>
                                    <p className="text-sm text-gray-500">{c.email} - {c.position}</p>
                                </div>
                                <button onClick={() => setCandidates(candidates.filter((_, i) => i !== idx))} className="text-red-600 text-sm">å‰Šé™¤</button>
                            </div>
                        ))}
                        {candidates.length === 0 && <p className="text-center py-8 text-gray-500">å€™è£œè€…ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>}
                    </div>
                </div>
            );
        }


        function SCTInterview({ candidates, setCandidates, sctQuestions }) {
            const [selectedCandidate, setSelectedCandidate] = useState(null);
            const [answers, setAnswers] = useState({});
            const [interviewNotes, setInterviewNotes] = useState('');

            function handleSelectCandidate(candidate) {
                setSelectedCandidate(candidate);
                if (candidate && candidate.sctAnswers && candidate.sctAnswers.length > 0) {
                    const answerMap = {};
                    candidate.sctAnswers.forEach(a => {
                        answerMap[a.questionId] = a.answer;
                    });
                    setAnswers(answerMap);
                    setInterviewNotes(candidate.interviewNotes || '');
                } else {
                    setAnswers({});
                    setInterviewNotes('');
                }
            }

            function handleSave() {
                if (!selectedCandidate) return;
                const sctAnswers = Object.keys(answers).map(qId => {
                    const q = sctQuestions.find(q => q.id === parseInt(qId));
                    return {
                        questionId: parseInt(qId),
                        question: q ? q.question : '',
                        answer: answers[qId]
                    };
                });
                const updatedCandidates = candidates.map(c =>
                    c.id === selectedCandidate.id
                        ? { ...c, sctAnswers, interviewNotes, sctCompletedAt: new Date().toISOString() }
                        : c
                );
                setCandidates(updatedCandidates);
                alert('SCTé¢æ¥çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            }

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">SCTé¢æ¥å®Ÿæ–½</h2>
                        <div className="bg-purple-50 border-l-4 border-purple-500 p-4 mb-6">
                            <p className="text-sm text-purple-800"><strong>æ–‡ç« å®Œæˆå•é¡Œï¼ˆSCTï¼‰:</strong> å»ºå‰ã‚’é¿ã‘ã€ç„¡æ„è­˜ã®æ€è€ƒé€£é–ã‚’å¼•ãå‡ºã™15å• / 12-13åˆ†</p>
                        </div>

                        <div className="mb-6">
                            <label className="block text-sm font-medium mb-2">å€™è£œè€…ã‚’é¸æŠ</label>
                            <select 
                                value={selectedCandidate?.id || ''} 
                                onChange={(e) => {
                                    const candidate = candidates.find(c => c.id === parseInt(e.target.value));
                                    handleSelectCandidate(candidate);
                                }} 
                                className="w-full px-3 py-2 border rounded-lg"
                            >
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                {candidates.map(c => (
                                    <option key={c.id} value={c.id}>{c.name} - {c.position || 'è·ç¨®æœªè¨­å®š'}</option>
                                ))}
                            </select>
                        </div>

                        {selectedCandidate && (
                            <div className="space-y-6">
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <h3 className="font-medium mb-2">å€™è£œè€…æƒ…å ±</h3>
                                    <p className="text-sm"><strong>æ°å:</strong> {selectedCandidate.name}</p>
                                    <p className="text-sm"><strong>è·ç¨®:</strong> {selectedCandidate.position}</p>
                                </div>

                                <div className="space-y-4">
                                    <h3 className="font-bold text-lg">SCT 15å•</h3>
                                    <p className="text-sm text-gray-600">ã§ãã‚‹ã ã‘å…·ä½“çš„ã«æ›¸ã„ã¦ãã ã•ã„</p>
                                    {sctQuestions.map((q, idx) => (
                                        <div key={q.id} className="border rounded-lg p-4 bg-white">
                                            <div className="flex items-start space-x-3">
                                                <span className="flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center font-bold text-sm">{idx + 1}</span>
                                                <div className="flex-1">
                                                    <p className="font-medium mb-2">{q.question}</p>
                                                    <textarea 
                                                        value={answers[q.id] || ''} 
                                                        onChange={(e) => setAnswers({...answers, [q.id]: e.target.value})} 
                                                        className="w-full px-3 py-2 border rounded-lg" 
                                                        rows="2" 
                                                        placeholder="å›ç­”ã‚’å…¥åŠ›..."
                                                    />
                                                    <div className="mt-2 text-xs text-gray-500">
                                                        <p><strong>ç‹™ã„:</strong> {q.aim} | <strong>ä¾¡å€¤è¦³:</strong> {q.coreValue}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-2">é¢æ¥å®˜ãƒ¡ãƒ¢ãƒ»æ„Ÿæƒ³</label>
                                    <textarea 
                                        value={interviewNotes} 
                                        onChange={(e) => setInterviewNotes(e.target.value)} 
                                        className="w-full px-3 py-2 border rounded-lg" 
                                        rows="4" 
                                        placeholder="é¢æ¥ä¸­ã®å°è±¡ã€æ°—ã¥ãã€æ‡¸å¿µç‚¹ãªã©"
                                    />
                                </div>

                                <button onClick={handleSave} className="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium">
                                    SCTé¢æ¥çµæœã‚’ä¿å­˜
                                </button>
                            </div>
                        )}

                        {!selectedCandidate && (
                            <div className="text-center py-12 text-gray-500">
                                <span className="text-4xl">ğŸ“</span>
                                <p className="mt-3">å€™è£œè€…ã‚’é¸æŠã—ã¦SCTé¢æ¥ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function EvaluationJudgment({ candidates, setCandidates, coreValues, personas }) {
            const [selectedCandidate, setSelectedCandidate] = useState(null);
            const [aptitudeScores, setAptitudeScores] = useState({ dangerZones: '', extremeValues: '', notes: '' });
            const [evaluationInProgress, setEvaluationInProgress] = useState(false);

            function handleSelectCandidate(candidate) {
                setSelectedCandidate(candidate);
                if (candidate && candidate.aptitudeData) {
                    setAptitudeScores(candidate.aptitudeData);
                } else {
                    setAptitudeScores({ dangerZones: '', extremeValues: '', notes: '' });
                }
            }

            function handleSaveAptitude() {
                if (!selectedCandidate) return;
                const updatedCandidates = candidates.map(c =>
                    c.id === selectedCandidate.id ? { ...c, aptitudeData: aptitudeScores } : c
                );
                setCandidates(updatedCandidates);
                setSelectedCandidate({ ...selectedCandidate, aptitudeData: aptitudeScores });
                alert('é©æ€§è¨ºæ–­çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            }

            async function handleAIEvaluation() {
                if (!selectedCandidate || !selectedCandidate.sctAnswers || selectedCandidate.sctAnswers.length === 0) {
                    alert('SCTé¢æ¥çµæœãŒå¿…è¦ã§ã™');
                    return;
                }

                setEvaluationInProgress(true);

                try {
                    const sctSummary = selectedCandidate.sctAnswers.map((a, idx) => `Q${idx + 1}: ${a.question}\nA: ${a.answer}`).join('\n\n');
                    const coreValuesSummary = coreValues.map(cv => `ã€${cv.name}ã€‘å®šç¾©: ${cv.definition} | è¡Œå‹•: ${cv.behaviors}`).join('\n');
                    const personaSummary = personas.map(p => `ã€${p.name}ã€‘\nã‚­ãƒ£ãƒƒãƒ: ${p.catchPhrase}\nä½¿å‘½: ${p.mission}`).join('\n\n');

                    const prompt = `# æ¡ç”¨è©•ä¾¡ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ

ã‚ãªãŸã¯æ¡ç”¨è©•ä¾¡ã®å°‚é–€å®¶ã§ã™ã€‚ä»¥ä¸‹ã®æƒ…å ±ã‚’åŸºã«ã€å€™è£œè€…ã®æ¡å¦ã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚

## ä¼šç¤¾ã®ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼
${coreValuesSummary || 'ï¼ˆæœªè¨­å®šï¼‰'}

## æ±‚ã‚ã‚‹äººç‰©åƒï¼ˆãƒšãƒ«ã‚½ãƒŠï¼‰
${personaSummary || 'ï¼ˆæœªè¨­å®šï¼‰'}

## å€™è£œè€…æƒ…å ±
- æ°å: ${selectedCandidate.name}
- å¿œå‹Ÿè·ç¨®: ${selectedCandidate.position || 'æœªè¨­å®š'}

## SCTé¢æ¥å›ç­”ï¼ˆæ–‡ç« å®Œæˆå•é¡Œï¼‰
${sctSummary}

## é¢æ¥å®˜ãƒ¡ãƒ¢
${selectedCandidate.interviewNotes || 'ãªã—'}

## é©æ€§è¨ºæ–­çµæœ
- å±é™ºé ˜åŸŸï¼ˆâ‰¥70ç‚¹ï¼‰: ${aptitudeScores.dangerZones || 'ãªã—'}
- æ¥µç«¯å€¤ï¼ˆâ‰¤20 or â‰¥80ï¼‰: ${aptitudeScores.extremeValues || 'ãªã—'}

---

ä»¥ä¸‹ã®å½¢å¼ã§è©•ä¾¡ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ï¼š

### 1. SCTå„å•è©•ä¾¡ï¼ˆâ—‹â–³Ã—ï¼‰
å„å•ã«ã¤ã„ã¦è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

### 2. å¼·ã¿ã¨å¼±ã¿
- å¼·ã¿: 3-5ç‚¹
- å¼±ã¿ãƒ»ãƒªã‚¹ã‚¯: 3-5ç‚¹

### 3. ç·åˆåˆ¤å®š
ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’é¸æŠï¼š
- **æ¡ç”¨**: â—‹ãŒ8å•ä»¥ä¸Š + è‡´å‘½çš„ãƒªã‚¹ã‚¯ãªã—
- **ä¿ç•™**: â–³å¤šãé©åˆæ›–æ˜§
- **ä¸æ¡ç”¨**: Ã—ãŒ5å•ä»¥ä¸Š

### 4. å…¥ç¤¾å¾Œãƒªã‚¹ã‚¯ã¨ã‚µãƒãƒ¼ãƒˆæ¡ˆ
å…·ä½“çš„ãªé…ç½®ãƒ»OJTãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã®ææ¡ˆ`;

                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 4000,
                            messages: [{ role: 'user', content: prompt }]
                        })
                    });

                    if (!response.ok) throw new Error('APIå‘¼ã³å‡ºã—ã«å¤±æ•—ã—ã¾ã—ãŸ');

                    const data = await response.json();
                    const evaluationText = data.content[0].text;

                    let decision = 'ä¿ç•™';
                    if (evaluationText.includes('**æ¡ç”¨**') || evaluationText.includes('ç·åˆåˆ¤å®š: æ¡ç”¨')) {
                        decision = 'æ¡ç”¨';
                    } else if (evaluationText.includes('**ä¸æ¡ç”¨**') || evaluationText.includes('ç·åˆåˆ¤å®š: ä¸æ¡ç”¨')) {
                        decision = 'ä¸æ¡ç”¨';
                    }

                    const evaluation = { decision, fullReport: evaluationText, evaluatedAt: new Date().toISOString() };
                    const updatedCandidates = candidates.map(c =>
                        c.id === selectedCandidate.id ? { ...c, evaluation } : c
                    );
                    setCandidates(updatedCandidates);
                    setSelectedCandidate({ ...selectedCandidate, evaluation });

                    alert('AIè©•ä¾¡ãŒå®Œäº†ã—ã¾ã—ãŸ');
                } catch (error) {
                    console.error('è©•ä¾¡ã‚¨ãƒ©ãƒ¼:', error);
                    alert('è©•ä¾¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
                } finally {
                    setEvaluationInProgress(false);
                }
            }

            function handleDownloadReport() {
                if (!selectedCandidate?.evaluation) return;
                const reportText = `æ¡ç”¨è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ
=====================================

å€™è£œè€…: ${selectedCandidate.name}
è·ç¨®: ${selectedCandidate.position || 'æœªè¨­å®š'}
è©•ä¾¡æ—¥: ${new Date(selectedCandidate.evaluation.evaluatedAt).toLocaleString('ja-JP')}
åˆ¤å®š: ${selectedCandidate.evaluation.decision}

=====================================

${selectedCandidate.evaluation.fullReport}

=====================================
ç”Ÿæˆå…ƒ: æ¡ç”¨æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ 
`;
                const blob = new Blob([reportText], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ_${selectedCandidate.name}_${new Date().toISOString().split('T')[0]}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            }

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">æ¡å¦åˆ¤å®š - AIè©•ä¾¡</h2>
                        <div className="bg-orange-50 border-l-4 border-orange-500 p-4 mb-6">
                            <p className="text-sm text-orange-800"><strong>ä¸‰ä½ä¸€ä½“è©•ä¾¡:</strong> SCTï¼ˆä¾¡å€¤è¦³ï¼‰Ã— é©æ€§è¨ºæ–­ï¼ˆè·å‹™é©åˆï¼‰Ã— ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼å…±æ„Ÿ</p>
                        </div>

                        <div className="mb-6">
                            <label className="block text-sm font-medium mb-2">å€™è£œè€…ã‚’é¸æŠ</label>
                            <select 
                                value={selectedCandidate?.id || ''} 
                                onChange={(e) => {
                                    const candidate = candidates.find(c => c.id === parseInt(e.target.value));
                                    handleSelectCandidate(candidate);
                                }} 
                                className="w-full px-3 py-2 border rounded-lg"
                            >
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                {candidates.filter(c => c.sctAnswers && c.sctAnswers.length > 0).map(c => (
                                    <option key={c.id} value={c.id}>
                                        {c.name} - {c.position || 'è·ç¨®æœªè¨­å®š'} {c.evaluation ? `[${c.evaluation.decision}]` : ''}
                                    </option>
                                ))}
                            </select>
                        </div>

                        {selectedCandidate && (
                            <div className="space-y-6">
                                <div className="border rounded-lg p-4">
                                    <h3 className="font-bold mb-3">é©æ€§è¨ºæ–­çµæœã®å…¥åŠ›</h3>
                                    <div className="space-y-3">
                                        <div>
                                            <label className="block text-sm font-medium mb-1">å±é™ºé ˜åŸŸï¼ˆâ‰¥70ç‚¹ï¼‰ã®é …ç›®</label>
                                            <input 
                                                type="text" 
                                                value={aptitudeScores.dangerZones} 
                                                onChange={(e) => setAptitudeScores({...aptitudeScores, dangerZones: e.target.value})} 
                                                className="w-full px-3 py-2 border rounded-lg text-sm" 
                                                placeholder="ä¾‹: ä»•äº‹é‡è€æ€§ 72ç‚¹"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium mb-1">æ¥µç«¯å€¤ï¼ˆâ‰¤20 or â‰¥80ï¼‰</label>
                                            <input 
                                                type="text" 
                                                value={aptitudeScores.extremeValues} 
                                                onChange={(e) => setAptitudeScores({...aptitudeScores, extremeValues: e.target.value})} 
                                                className="w-full px-3 py-2 border rounded-lg text-sm" 
                                                placeholder="ä¾‹: ä¸»ä½“æ€§18ç‚¹ã€å”èª¿æ€§85ç‚¹"
                                            />
                                        </div>
                                        <button onClick={handleSaveAptitude} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                                            é©æ€§è¨ºæ–­çµæœã‚’ä¿å­˜
                                        </button>
                                    </div>
                                </div>

                                <div className="border-2 border-purple-200 rounded-lg p-6 bg-purple-50">
                                    <h3 className="font-bold text-lg mb-3">AIè©•ä¾¡ã®å®Ÿè¡Œ</h3>
                                    <p className="text-sm text-gray-700 mb-4">Claude APIã‚’ä½¿ç”¨ã—ã¦ç·åˆçš„ã«è©•ä¾¡ã—ã¾ã™</p>
                                    <button 
                                        onClick={handleAIEvaluation} 
                                        disabled={evaluationInProgress} 
                                        className={`w-full px-6 py-3 rounded-lg font-medium text-white ${
                                            evaluationInProgress ? 'bg-gray-400 cursor-not-allowed' : 'bg-purple-600 hover:bg-purple-700'
                                        }`}
                                    >
                                        {evaluationInProgress ? 'è©•ä¾¡ä¸­...' : 'AIè©•ä¾¡ã‚’å®Ÿè¡Œ'}
                                    </button>
                                </div>

                                {selectedCandidate.evaluation && (
                                    <div className="border rounded-lg p-6 bg-white">
                                        <div className="flex items-center justify-between mb-4">
                                            <h3 className="font-bold text-lg">è©•ä¾¡çµæœ</h3>
                                            <div className="flex items-center space-x-3">
                                                <span className={`px-4 py-2 rounded-lg font-bold text-lg ${
                                                    selectedCandidate.evaluation.decision === 'æ¡ç”¨' ? 'bg-green-100 text-green-800' :
                                                    selectedCandidate.evaluation.decision === 'ä¿ç•™' ? 'bg-yellow-100 text-yellow-800' :
                                                    'bg-red-100 text-red-800'
                                                }`}>
                                                    {selectedCandidate.evaluation.decision}
                                                </span>
                                                <button onClick={handleDownloadReport} className="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                                                    â¬‡ï¸ ãƒ¬ãƒãƒ¼ãƒˆDL
                                                </button>
                                            </div>
                                        </div>
                                        <div className="prose max-w-none">
                                            <pre className="whitespace-pre-wrap bg-gray-50 p-4 rounded text-sm">{selectedCandidate.evaluation.fullReport}</pre>
                                        </div>
                                        <p className="text-xs text-gray-500 mt-4">
                                            è©•ä¾¡æ—¥æ™‚: {new Date(selectedCandidate.evaluation.evaluatedAt).toLocaleString('ja-JP')}
                                        </p>
                                    </div>
                                )}
                            </div>
                        )}

                        {!selectedCandidate && (
                            <div className="text-center py-12 text-gray-500">
                                <span className="text-4xl">âš™ï¸</span>
                                <p className="mt-3">SCTé¢æ¥ãŒå®Œäº†ã—ãŸå€™è£œè€…ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function OnboardingPlan({ candidates, coreValues }) {
            const [selectedCandidate, setSelectedCandidate] = useState(null);
            const acceptedCandidates = candidates.filter(c => c.evaluation?.decision === 'æ¡ç”¨');

            const onboardingMilestones = [
                { day: 'Day 1-7', title: 'åˆé€±ã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³', tasks: ['OJTè¨ˆç”»ã®å…±æœ‰', 'ãƒ¡ãƒ³ã‚¿ãƒ¼è¨­å®š', 'KPIãƒ»ç›®æ¨™ã®åˆæ„', 'ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼ã®ç´¹ä»‹'] },
                { day: 'Day 30', title: '1ãƒ¶æœˆãƒ¬ãƒ“ãƒ¥ãƒ¼', tasks: ['ä¾¡å€¤è¦³ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'å°ã•ãªæˆåŠŸã®æ‰¿èª', 'å›°ã‚Šã”ã¨ãƒ’ã‚¢ãƒªãƒ³ã‚°'] },
                { day: 'Day 60', title: '2ãƒ¶æœˆèª¿æ•´', tasks: ['é…ç½®ã®å¾®èª¿æ•´æ¤œè¨', 'æ¥­å‹™æ”¹å–„ææ¡ˆã®å ´', 'ã‚¹ã‚­ãƒ«é–‹ç™ºè¨ˆç”»'] },
                { day: 'Day 90', title: '3ãƒ¶æœˆç·æ‹¬', tasks: ['ç›¸äº’ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯', 'ä¸­æœŸæˆé•·è¨ˆç”»ã®åˆæ„', 'è©¦ç”¨æœŸé–“è©•ä¾¡'] }
            ];

            function handleDownloadPlan() {
                if (!selectedCandidate) return;
                const planText = `90æ—¥ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨ˆç”»
=====================================

å€™è£œè€…: ${selectedCandidate.name}
è·ç¨®: ${selectedCandidate.position || 'æœªè¨­å®š'}
ä½œæˆæ—¥: ${new Date().toLocaleString('ja-JP')}

=====================================

${onboardingMilestones.map(m => `
ã€${m.day}ã€‘${m.title}
${m.tasks.map(t => `  - ${t}`).join('\n')}
`).join('\n')}

=====================================

ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼
${coreValues.map(cv => `ã€${cv.name}ã€‘
  å®šç¾©: ${cv.definition}
  è¡Œå‹•: ${cv.behaviors}`).join('\n\n')}

=====================================
`;
                const blob = new Blob([planText], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨ˆç”»_${selectedCandidate.name}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            }

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">90æ—¥ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨ˆç”»</h2>
                        <div className="bg-green-50 border-l-4 border-green-500 p-4 mb-6">
                            <p className="text-sm text-green-800"><strong>å®šç€ã®éµ:</strong> ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆæ–‡åŒ–ï¼å‰å€’ã—æ–‡åŒ–ï¼è¤’ã‚åˆã†æ–‡åŒ–</p>
                        </div>

                        <div className="mb-6">
                            <label className="block text-sm font-medium mb-2">æ¡ç”¨æ±ºå®šè€…ã‚’é¸æŠ</label>
                            <select 
                                value={selectedCandidate?.id || ''} 
                                onChange={(e) => {
                                    const candidate = acceptedCandidates.find(c => c.id === parseInt(e.target.value));
                                    setSelectedCandidate(candidate);
                                }} 
                                className="w-full px-3 py-2 border rounded-lg"
                            >
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                {acceptedCandidates.map(c => (
                                    <option key={c.id} value={c.id}>{c.name} - {c.position || 'è·ç¨®æœªè¨­å®š'}</option>
                                ))}
                            </select>
                        </div>

                        {selectedCandidate && (
                            <div className="space-y-6">
                                <div className="space-y-4">
                                    <h3 className="font-bold text-lg">90æ—¥ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h3>
                                    {onboardingMilestones.map((milestone, idx) => (
                                        <div key={idx} className="border rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div className="flex items-center space-x-3 mb-3">
                                                <span className="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium">{milestone.day}</span>
                                                <h4 className="font-bold">{milestone.title}</h4>
                                            </div>
                                            <ul className="space-y-1 ml-4">
                                                {milestone.tasks.map((task, i) => (
                                                    <li key={i} className="flex items-start space-x-2 text-sm">
                                                        <span className="text-green-600 mt-1">âœ“</span>
                                                        <span>{task}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    ))}
                                </div>

                                {coreValues.length > 0 && (
                                    <div className="border rounded-lg p-4 bg-yellow-50">
                                        <h3 className="font-bold mb-3">ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼æµ¸é€è¨ˆç”»</h3>
                                        <div className="space-y-2">
                                            {coreValues.map((cv, idx) => (
                                                <div key={idx} className="bg-white p-3 rounded border">
                                                    <p className="font-medium text-sm">{cv.name}</p>
                                                    <p className="text-xs text-gray-600 mt-1">
                                                        å…·ä½“çš„è¡Œå‹•: {cv.behaviors.split('/').slice(0, 2).join(' / ')}
                                                    </p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <button 
                                    onClick={handleDownloadPlan} 
                                    className="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium"
                                >
                                    â¬‡ï¸ ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨ˆç”»ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                                </button>
                            </div>
                        )}

                        {!selectedCandidate && acceptedCandidates.length === 0 && (
                            <div className="text-center py-12 text-gray-500">
                                <span className="text-4xl">ğŸ“…</span>
                                <p className="mt-3">æ¡ç”¨æ±ºå®šã—ãŸå€™è£œè€…ãŒã„ã¾ã›ã‚“</p>
                            </div>
                        )}

                        {!selectedCandidate && acceptedCandidates.length > 0 && (
                            <div className="text-center py-12 text-gray-500">
                                <span className="text-4xl">ğŸ“…</span>
                                <p className="mt-3">æ¡ç”¨æ±ºå®šè€…ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
